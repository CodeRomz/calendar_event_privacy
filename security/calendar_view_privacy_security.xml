<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="rule_calendar_view_privacy" model="ir.rule">
        <field name="name">Calendar: Hide Othersâ€™ Private Events</field>
        <field name="model_id" ref="calendar.model_calendar_event"/>

        <!-- Only allow access if:
             - Event is public, OR
             - Current user is the creator, OR
             - Current user is an attendee (via partner_ids)
        -->
        <field name="domain_force">
            [
                '|',
                    ('calendar_view', '=', 'public'),
                    '|',
                        ('user_id', '=', user.id),
                        ('partner_ids', 'in', user.partner_id.id)
            ]
        </field>

        <field name="groups" eval="[(4, ref('base.group_user'))]"/>
    </record>
</odoo>
